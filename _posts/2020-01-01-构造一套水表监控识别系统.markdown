---
layout: post
title:  "构造一套水表监控识别系统"
date:   2020-01-01 14:52:16 +0800
slug: water_meter_monitoring system
---

# 现状
现代家庭装修水电煤系统中，用电和用煤的安全性已经被足够重视。因为涉及到生命安全，几乎每家都会安装断路器和漏电保护开关。煤气泄漏检测装置最近也流行起来。但漏水检测装置却罕有见到。

而家庭水管漏水却经常见到。现代家装中，木制材料、石膏板、照明电器都怕水，渗漏都会造成房屋经济损失或者无法修复的损伤。

本人曾经历过3次漏水事件，赔偿过楼下住户的石膏板吊顶，也修复过自家的木门和石膏板吊顶，墙布和木地板上至今仍有无法消除的痕迹。惨痛的教训使我一直比较关注水浸的主动防御方案。

目前市场上的方案大概有以下几种。

一、 水渍报警器

这类报警器用来检测环境中有没有水。两个距离相近的导体，当有水渍存在于导体之间的时候，导体之间的电阻会发生改变，随之报警器报警。

像下图这种，传感器拖着长长的探测线，使用时候，把线缠布置在可能漏水的地方。

![漏水检测线]({{ site.url }}/assets/img/water_1.png)

小米有出过水浸传感器，直接将它放在需要探测的地方就可以。

![水浸传感器]({{ site.url }}/assets/img/water_2.png)

这类报警器安装简单，探测线被我用于缠绕厨房所有管道上，以及铺设于厨柜地面这些看不见的地方。小米水浸传感器用于洗衣机背后、卫生间脸盆底下。

二、 流量检测类报警器

这类报警器会持续的检测管中的流量，如果流量值超过一定的阈值，将触发报警。而根据流量测量的方式不同，可以划分为两类。

**直接测量流量的报警器**

这类报警器自带流量计，可以直接获取到管路中的流量。

做地漏的潜水艇，出了一款漏水保护器。直接将保护器熔接在家庭进水管路上。水流通过报警器上的流量计，保护器上的MCU对流量计数，达到阈值后触发报警。由于熔接安装是一种永久性的安装，因此需要在装修阶段就预先设计安装，并且后期损坏更换比较麻烦。

![漏水保护器]({{ site.url }}/assets/img/water_3.png)

FLUID一款智能漏水保护器，可接入智能家居系统。它直接夹子管路上而无需破管，通过超声波的方式，感知管路中的流量。截至到目前，似乎在没有正式发售。

![FLUID]({{ site.url }}/assets/img/water_5.jpg)

**通过水表的方式获取流量**

其实的管路上的水表，就是一个精确的流量计。现代的水表，已经可以感知到轻微的滴水产生的流量并在表盘上产生人眼感知的转动。因此通过感知水表的转动，就可获取当前流量。

flume一款智能漏水保护器，可接入智能家居系统。它直接绑在水表上就可以感知水表的转动。其原理是水表内部的金属部件，转动时候会引发磁场的变化。然而国内为了防止有人用磁铁吸住水表让它不能转来偷水，早就是全塑料的水表了。

![flume]({{ site.url }}/assets/img/water_4.png)

国外论坛上还有一种[采用光学检测的方案探测流量](https://www.mysensors.org/build/pulse_water
)的方法，将光点照射在表盘上，当指针转动碰到光点，由于指针和表盘的颜色不一样，光点的反射光强度也会不一样。通过对光强变化计数即可知道指针转了多少圈。这种方法要求传感器紧贴并阻挡表盘，在国内为了方便抄表，水表通常在室外，这么干的话估计抄表员会给你拆了。

![反射法获取流量]({{ site.url }}/assets/img/water_6.jpg)

除此之外，通过摄像头直接对表盘做图像识别，也可以获取到流量，不过这种方案尚未见到产品。

（未完）




